# nav2_params.yaml
# Global configuration for Nav2 stack

amcl:
  ros__parameters:
    use_sim_time: true # Important for simulated environments
    set_initial_pose: true
    initial_pose:
      x: 0.0
      y: 0.0
      z: 0.0
      yaw: 0.0

bt_navigator:
  ros__parameters:
    use_sim_time: true
    default_bt_xml_filename: "behavior_trees/navigate_w_replanning_and_recovery.xml"
    goal_blackboard_timeout: 1.2

local_costmap:
  local_costmap:
    ros__parameters:
      update_frequency: 5.0
      publish_frequency: 2.0
      global_frame: odom
      robot_base_frame: base_link
      use_sim_time: true
      # ... other parameters ...
      plugins: ["obstacle_layer", "inflation_layer"]
      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        parameters:
          # Assuming you have a range sensor publishing to /range_sensor/out
          # Or replace with your LiDAR/Depth camera topics
          range_sensor_in: {topic: "/range_sensor/out", sensor_frame: "range_sensor_link"}
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        parameters:
          inflation_radius: 0.5

global_costmap:
  global_costmap:
    ros__parameters:
      update_frequency: 1.0
      publish_frequency: 1.0
      global_frame: map
      robot_base_frame: base_link
      use_sim_time: true
      # ... other parameters ...
      plugins: ["static_layer", "inflation_layer"]
      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        parameters:
          inflation_radius: 0.5

planner_server:
  ros__parameters:
    use_sim_time: true
    default_server_name: "planner_server"
    # Select your global planner (e.g., NavFn, SmacPlanner)
    default_planner_plugin: "nav2_navfn_planner::NavfnPlanner"
    # ... other parameters ...

controller_server:
  ros__parameters:
    use_sim_time: true
    default_server_name: "controller_server"
    # Select your local controller (e.g., DWBLocalPlanner, MPPIController)
    default_controller_plugin: "nav2_dwb_controller::DwbpController"
    # ... other parameters ...
    # Configure robot kinematics
    min_vel_x: -0.2
    max_vel_x: 0.5
    max_vel_theta: 1.0
    min_vel_theta: -1.0
    # Add other DWB specific parameters if using DWBLocalPlanner
    # ...
